<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Exchange Now</title>
    <link rel="stylesheet" type="text/css" href="style.css">
</head>

<body bgcolor='#f5f5f5'>
    <h1 id="title">Exchange Now</h1>
    <h2 id="sub_title">CWNU Capstone 2023</h2>

    <img src="https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2FblTdQu%2FbtsyPY1H8Bs%2FoRwfWp48oDWCSmsQAUTYBk%2Fimg.png"
        width="300" height="300" alt="logo" id="logo-image">

    <select id="currency-select">
        <option value="">ì„ íƒí•´ì£¼ì„¸ìš”</option>
        <option value="USD">ë¯¸êµ­ USD</option>
        <option value="JPY">ì¼ë³¸ JPY</option>
        <option value="AUD">í˜¸ì£¼ AUD</option>
    </select>

    <button id="goToOtherPage">
        <img src="https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2FnUj83%2FbtsyULQvuzM%2FOKZE3HTlp6rdxbdMTZGn90%2Fimg.png"
            width="25" height="25">
    </button>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            // ë²„íŠ¼ ì—˜ë¦¬ë¨¼íŠ¸ ê°€ì ¸ì˜¤ê¸°
            var button = document.getElementById('goToOtherPage');

            // ë²„íŠ¼ í´ë¦­ ì´ë²¤íŠ¸ ì²˜ë¦¬
            button.addEventListener('click', function () {
                // ìƒˆë¡œìš´ í˜ì´ì§€ë¡œ ì´ë™ (ì—¬ê¸°ì„œëŠ” 'detect.html'ë¡œ ì´ë™)
                window.location.href = 'detect.html';
            });
        });
    </script>

    <script> // jpy í™˜ìœ¨ ì •ë³´
        let jpy_price;
        const jpy_url = "https://cdn.jsdelivr.net/gh/fawazahmed0/currency-api@1/latest/currencies/jpy/krw.json";

        fetch(jpy_url)
            .then(response => response.json())
            .then(data => {
                jpy_price = parseInt(data.krw*100);

                const jpyCell = document.getElementById('jpy-cell');
                jpyCell.textContent = jpy_price.toLocaleString() + ' KRW'; // í™˜ìœ¨ì— 'KRW'ë¥¼ ì¶”ê°€í•˜ê³  í˜•ì‹í™”
            })
            .catch(error => {
                console.log(error);
            });
    </script>

    <script> //usd í™˜ìœ¨ ì •ë³´
        let usd_price;
        const usd_url = "https://cdn.jsdelivr.net/gh/fawazahmed0/currency-api@1/latest/currencies/usd/krw.json";

        fetch(usd_url) // URLë¡œ HTTP ìš”ì²­ 
            .then(response => response.json())  // ì‘ë‹µ ê°ì²´ë¥¼ JSON í˜•ì‹ìœ¼ë¡œ ë³€í™˜
            .then(data => {
                usd_price = parseInt(data.krw); // JSON ë°ì´í„°ì—ì„œ krw ê°’ì„ ì¶”ì¶œí•˜ì—¬ usd_priceì— ì •ìˆ˜í˜•ìœ¼ë¡œ ë³€í™˜

                const usdCell = document.getElementById('usd-cell');
                usdCell.textContent = usd_price.toLocaleString() + ' KRW'; // í™˜ìœ¨ì— 'KRW'ë¥¼ ì¶”ê°€í•˜ê³  í˜•ì‹í™”

                // 'í™˜ìœ¨()' ê´„í˜¸ ì•ˆì— data.date ì‚½ì…
                const exchangeElement = document.getElementById('exchange');
                exchangeElement.textContent = `í™˜ìœ¨ (${data.date})`;
            })
            .catch(error => {
                console.log(error);
            });
    </script>

    <script> //aud í™˜ìœ¨ ì •ë³´
        let aud_price;
        const aud_url = "https://cdn.jsdelivr.net/gh/fawazahmed0/currency-api@1/latest/currencies/aud/krw.json";

        fetch(aud_url) // URLë¡œ HTTP ìš”ì²­ 
            .then(response => response.json())  // ì‘ë‹µ ê°ì²´ë¥¼ JSON í˜•ì‹ìœ¼ë¡œ ë³€í™˜
            .then(data => {
                aud_price = parseInt(data.krw); // JSON ë°ì´í„°ì—ì„œ krw ê°’ì„ ì¶”ì¶œí•˜ì—¬ aud_priceì— ì •ìˆ˜í˜•ìœ¼ë¡œ ë³€í™˜

                const audCell = document.getElementById('aud-cell');
                audCell.textContent = aud_price.toLocaleString() + ' KRW'; // í™˜ìœ¨ì— 'KRW'ë¥¼ ì¶”ê°€í•˜ê³  í˜•ì‹í™”
            })
            .catch(error => {
                console.log(error);
            });
    </script>

    <h3 id='exchange'></h3>
    <table width="300" height="100">
        <tbody>
            <tr>
                <td align="left">ğŸ‡ºğŸ‡¸ ë¯¸êµ­ USD</td>
                <td id="usd-cell"></td>
            </tr>
            <tr>
                <td align="left">ğŸ‡¯ğŸ‡µ ì¼ë³¸ JPY</td>
                <td id="jpy-cell"></td>
            </tr>
            <tr>
                <td align="left">ğŸ‡¦ğŸ‡º í˜¸ì£¼ AUD</td>
                <td id="aud-cell"></td>
            </tr>
        </tbody>
    </table>


</html>